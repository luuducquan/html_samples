<script src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<div id="app"></div>
  
<script type="text/babel">
class App extends React.Component {
  constructor() {
    super();
    this.state = {}
  }
  
  getData = async() => {
    var url = "http://api.openweathermap.org/data/2.5/weather?id=1581129&units=metric&appid=d6477696b63c2e661af64eead58c11d9";
    var response = await fetch(url);
    this.state.current_weather = await response.json();
    
    url = "http://api.openweathermap.org/data/2.5/forecast?id=1581129&units=metric&appid=d6477696b63c2e661af64eead58c11d9&cnt=8";
    response = await fetch(url);
    this.state.next24h_weather = await response.json();
    
    this.forceUpdate();
  }
  
  getData2 = async() => {
      console.log(this.state);
  }

  render() {
    return (
    <div>
        {this.state.current_weather &&
          <div>
            <p><b>Thời tiết hiện tại</b></p>
            <p>Nhiệt độ : { this.state.current_weather.main.temp } °C</p>
            <p>Độ ẩm : { this.state.current_weather.main.humidity } %</p>
            <p>Áp suất khí quyển : { this.state.current_weather.main.pressure/1000 } atm</p>
          </div>       
        }
        {this.state.next24h_weather &&
          <div>
            <p><b>Thời tiết 24h tới</b></p>
            <table border="1">
              <thead>
                  <tr>
                    <th style={{width:"25%"}}>Thời gian</th>
                    <th style={{width:"25%"}}>Nhiệt độ °C</th>
                    <th style={{width:"25%"}}>Độ ẩm (%)</th>
                    <th style={{width:"25%"}}>Áp suất khí quyển (atm)</th>
                  </tr>
              </thead>
              <tbody>
                  {
                    this.state.next24h_weather.list.map((weather,i) =>
                      <tr key={i}>
                        <td style={{textAlign: "center"}}>{ weather.dt_txt }</td>
                        <td style={{textAlign: "center"}}>{ weather.main.temp }</td>
                        <td style={{textAlign: "center"}}>{ weather.main.humidity }</td>
                        <td style={{textAlign: "center"}}>{ weather.main.pressure/1000 }</td>
                      </tr>
                    )
                  }
              </tbody>
            </table>
          </div>
        }
        <br/>
        <button onClick={this.getData}>Get weather data</button>
    </div>)
  }
}
ReactDOM.render(<App/>, document.getElementById('app'));
</script>